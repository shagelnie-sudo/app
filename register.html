<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تسجيل حساب جديد - شغلني</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap');
        :root {
            --primary: #2563eb;
            --success: #10b981;
            --danger: #ef4444;
            --gray: #6b7280;
        }
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f5f7fa;
        }
        .step {
            width: 40px; height: 40px; border-radius: 50%;
            background-color: var(--gray); color: white;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; transition: background-color 0.3s ease;
        }
        .step.active { background-color: var(--success); }
        .form-card { transition: all 0.3s ease; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); }
        .message { text-align: center; padding: 1rem; border-radius: 8px; margin-top: 1rem; }
        .success-message { background-color: #dcfce7; color: #065f46; }
        .error-message { background-color: #fee2e2; color: #991b1b; }
        .password-requirement-item { display: flex; align-items: center; font-size: 0.875rem; color: #6b7280; margin-top: 0.5rem; }
        .password-requirement-item.valid { color: #10b981; }
        .password-input-wrapper { position: relative; }
        .password-toggle { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6b7280; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen py-10">

    <div class="w-full max-w-md bg-white rounded-xl shadow-lg p-8">
        <h2 class="text-3xl font-extrabold text-center text-gray-900 mb-6">إنشاء حساب جديد</h2>
        
        <div class="flex justify-between mb-8" id="stepContainer">
            <div class="step active" id="stepIndicator1">1</div>
            <div class="step" id="stepIndicator2">2</div>
            <div class="step" id="stepIndicator3">3</div>
            <div class="step" id="stepIndicator4">4</div>
            <div class="step hidden" id="stepIndicator5">5</div>
            <div class="step hidden" id="stepIndicator6">6</div>
            <div class="step hidden" id="stepIndicator7">7</div>
        </div>

        <form id="unifiedForm">
            <div class="form-card" id="step1">
                <h2 class="text-lg font-bold mb-4 border-b pb-2">الخطوة 1: بيانات الحساب</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">الاسم الثلاثي</label>
                        <input name="name" type="text" required class="w-full px-3 py-2 border rounded-md focus:ring-blue-500 text-right" placeholder="أدخل اسمك الثلاثي">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">البريد الإلكتروني</label>
                        <input id="email" name="email" type="email" required class="w-full px-3 py-2 border rounded-md focus:ring-blue-500 text-right" placeholder="example@mail.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">كلمة المرور</label>
                        <div class="password-input-wrapper">
                            <input id="password" name="password" type="password" required class="w-full px-3 py-2 border rounded-md focus:ring-blue-500 text-right pr-10" placeholder="كلمة مرور قوية">
                            <i class="fas fa-eye password-toggle" id="togglePassword"></i>
                        </div>
                        <div class="password-requirements mt-2" id="passwordRequirements">
                            <div id="min-length" class="password-requirement-item"><i class="fas fa-circle ml-2 text-xs"></i> 6 أحرف على الأقل</div>
                            <div id="has-upper" class="password-requirement-item"><i class="fas fa-circle ml-2 text-xs"></i> حرف كبير</div>
                            <div id="has-number" class="password-requirement-item"><i class="fas fa-circle ml-2 text-xs"></i> رقم واحد</div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">تأكيد كلمة المرور</label>
                        <div class="password-input-wrapper">
                            <input id="confirmPassword" type="password" required class="w-full px-3 py-2 border rounded-md pr-10" placeholder="أعد كتابة كلمة المرور">
                            <i class="fas fa-eye password-toggle" id="toggleConfirmPassword"></i>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">نوع الحساب</label>
                        <select id="role" name="role" required class="w-full px-3 py-2 border rounded-md">
                            <option value="" disabled selected>اختر النوع</option>
                            <option value="employee">موظف (أبحث عن عمل)</option>
                            <option value="employer">صاحب عمل / شركة</option>
                        </select>
                    </div>
                </div>
                <button type="button" class="w-full mt-6 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700" id="nextBtn1">التالي</button>
            </div>

            <div class="form-card hidden text-center" id="step2-verification">
                <h2 class="text-lg font-bold mb-4">الخطوة 2: توثيق البريد</h2>
                <p class="text-gray-600 mb-4">أرسلنا رابط توثيق إلى: <br><span id="verificationEmailDisplay" class="font-bold text-blue-600"></span></p>
                <button type="button" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 mb-3" id="confirmVerificationBtn">تأكيد التوثيق والمتابعة</button>
                <button type="button" class="text-blue-600 text-sm" id="resendVerificationBtn">إعادة إرسال الرابط</button>
            </div>

            <div class="employee-steps">
                <div class="form-card hidden" id="step3-employee">
                    <h2 class="text-lg font-bold mb-4">الخطوة 3: البيانات الوظيفية</h2>
                    <input type="text" name="headline" placeholder="العنوان الوظيفي" class="w-full p-2 border rounded mb-4">
                    <textarea name="bio" placeholder="نبذة عنك" class="w-full p-2 border rounded mb-4" rows="3"></textarea>
                    <label class="text-sm">صورة شخصية:</label>
                    <input type="file" name="profilePhoto" class="w-full mb-4">
                    <input type="tel" name="phone" placeholder="رقم الهاتف" class="w-full p-2 border rounded mb-4">
                    
                    <select id="state" name="state" class="w-full p-2 border rounded mb-2"><option value="">اختر الولاية</option></select>
                    <div id="cityContainer" class="hidden"><select id="city" name="city" class="w-full p-2 border rounded mb-2"></select></div>
                    <div id="areaContainer" class="hidden"><select id="area" name="area" class="w-full p-2 border rounded mb-4"></select></div>

                    <div class="flex gap-2">
                        <button type="button" class="w-1/2 bg-gray-200 py-2 rounded" id="prevBtn3-employee">السابق</button>
                        <button type="button" class="w-1/2 bg-blue-600 text-white py-2 rounded" id="nextBtn3-employee">التالي</button>
                    </div>
                </div>
                </div>

            <div class="employer-steps">
                <div class="form-card hidden" id="step3-employer">
                    <h2 class="text-lg font-bold mb-4">الخطوة 3: بيانات الشركة</h2>
                    <input type="text" name="companyName" placeholder="اسم الشركة" class="w-full p-2 border rounded mb-4">
                    <input type="email" name="companyEmail" placeholder="إيميل التواصل" class="w-full p-2 border rounded mb-4">
                    <button type="button" class="w-full bg-blue-600 text-white py-2 rounded" id="nextBtn3-employer">التالي</button>
                </div>
                </div>

        </form>

        <div id="message" class="message hidden"></div>
        
        <div class="mt-8 text-center border-t pt-4">
            <p class="text-gray-600 text-sm">لديك حساب بالفعل؟ <a href="login.html" class="text-blue-600 font-bold">تسجيل الدخول</a></p>
        </div>
    </div>

    <script type="module" src="js/registration.js"></script>
</body>
</html>
